!function(t){function i(i){t(i).find(".twim-widget-controls").filter((function(){if(i!=document)return!0;return!t(this).closest(".widgets-holder-wrap").is("#available-widgets")})).each((function(){const e=t(this);e.find(".twim-tab-nav li").off("click").on("click",(function(){const i=t(this).data("tab");e.find(".twim-tab-nav li").removeClass("active"),t(this).addClass("active"),e.find(".twim-tab-content").removeClass("active").hide(),e.find(`.twim-tab-content[data-tab="${i}"]`).addClass("active").show()})),e.find(".twim-selectize").each((function(){i!=document&&this.selectize&&this.selectize.destroy(),this.selectize||t(this).selectize({plugins:["remove_button"],delimiter:",",persist:!1,render:{option:function(t,i){const e=Number(t.level)||0;return`<div class="option">${"&nbsp;".repeat(4*e)}${i(t.text)}</div>`}}})})),e.find(".twim-selectize-showhide").each((function(){i!=document&&this.selectize&&this.selectize.destroy(),this.selectize||t(this).selectize({delimiter:",",persist:!1,render:{option:function(t,i){let e="";return"show"===t.value?e='<span class="dashicons dashicons-visibility" style="margin-right:4px;"></span>':"hide"===t.value&&(e='<span class="dashicons dashicons-hidden" style="margin-right:4px;"></span>'),'<div style="vertical-align:middle">'+e+i(t.text)+"</div>"},item:function(t,i){let e="";return"show"===t.value?e='<span class="dashicons dashicons-visibility" style="margin-right:4px;"></span>':"hide"===t.value&&(e='<span class="dashicons dashicons-hidden" style="margin-right:4px;"></span>'),'<div style="vertical-align:middle">'+e+i(t.text)+"</div>"}}})})),e.find(".twim-tab-nav li.active").trigger("click")}))}function e(t){var i=t.closest(".twim-tabs").find(".twim-wrap");"show"===t.val()||"hide"===t.val()?i.addClass("twim-disabled"):i.removeClass("twim-disabled")}t(document).ready((function(){i(document)})),t(document).on("widget-updated widget-added",(function(t,e){i(e)})),t(".twim-andor").each((function(){e(t(this))})),t(document).on("change",".twim-andor",(function(){e(t(this))}));let n=!1;t(document).on("click",".widget-control-save",(function(){n=!0,setTimeout((()=>{n=!1}),2e3)})),t(document).on("click",".twim-tab-nav li",(function(){if(n)return;const i=t(this),e=i.data("tab");i.closest(".widget").data("twim-active-tab",e)})),t(".widget").each((function(){const i=this;new MutationObserver((function(e){e.forEach((function(e){if("attributes"===e.type&&"class"===e.attributeName){const n=e.oldValue.includes("widget-dirty"),s=i.classList.contains("widget-dirty");n&&!s&&function(t){const i=t.data("twim-active-tab");i&&(t.find(".twim-tab-nav li").removeClass("active"),t.find('.twim-tab-nav li[data-tab="'+i+'"]').addClass("active"),t.find(".twim-tab-content").hide(),t.find('.twim-tab-content[data-tab="'+i+'"]').show())}(t(i))}}))})).observe(i,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0})}))}(jQuery);